<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sio SYSTEM "http://lcio.desy.de/doc/sio.dtd">

<!--
    Document   : lcio.xml
    Created on : December 12, 2002, 5:06 PM
    Author     : Frank Gaede, Ties Behnke, Norm Graf, Tony Johnson
    Description:
        Description of LCIO format in sio files.
	Unless specified otherwise the default units used in LCIO files are:
	length: mm, energy: GeV and time ns
-->

<sio>
  <record name="LCRunHeader">
     <block name="RunHeader" major="1" minor="0">
        <data type="int" name="runNumber"></data>
        <data type="string" name="detectorName"></data>
        <data type="string" name="description"></data>
        <data type="int" name="nActiveSubdetectors"></data>
        <repeat count="nActiveSubdetectors">
           <data type="string" name="subdetectorName"></data>
        </repeat>
     </block>
  </record>  
  <record name="LCEventHeader">
     <block name="EventHeader" major="1" minor="0">
        <data type="int" name="runNumber"></data>
        <data type="int" name="eventNumber"></data>
        <data type="long" name="timeStamp"></data>
        <data type="string" name="detectorName"></data>
        <data type="int" name="nBlockNames"></data>
        <repeat count="nBlockNames">
           <data type="string" name="blockName"></data>
	   <data type="string" name="blockType">e.g. CalorimeterHit, TrackerHit</data>
        </repeat>
     </block>
  </record>  
  <record name="LCEvent">
      <block name="MCParticle" major="1" minor="0">
         <data type="int" name="flags"> not yet used, Bits 0-15 user/application dependent</data>
	 <data type="int" name="nMC"></data>
         <repeat count="nMC">
            <data type="ptag" name="this"></data>
            <if condition="major==0&amp;&amp;minor&lt;9">
                <data type="pntr" name="parent"></data>
                <data type="pntr" name="secondParent"></data>
                <data type="int" name="nDaughter"></data>
                <repeat count="nDaughter">
                   <data type="pntr" name="daughter"></data>
                </repeat> 
            <else/>
                <data type="int" name="nParent"></data>
                <repeat count="nParent">
                   <data type="pntr" name="parent"></data>
                </repeat>
            </if>   
            <data type="int" name="PDG"></data>
            <data type="int" name="generatorStatus">
                              =0   empty line
                              =1   undecayed particle, stable in the generator
                              =2   particle decayed in the generator
                              =3   documentation line
	    </data>
            <if condition="!(major==0&amp;&amp;minor&lt;9)">
                <data type="int" name="simulatorStatus">
                   to be defined. Bit 31 reserved for internal use - thus effectively unsigned.
                </data>
            </if>

            <data type="double[3]" name="vertex">Production vertex</data>
            <data type="float[3]" name="momentum">Momentum at production vertex</data>
            <data type="float" name="mass"></data>
            <data type="float" name="charge"></data>
	    <if condition="major==0&amp;&amp;minor&lt;9"> 
               <if condition="nDaughter==0">
                  <data type="double[3]" name="endpoint"/>
               </if>
            <else/>
               <if condition="(simulatorStatus&amp;(1&lt;&lt;31)) != 0">
                  <data type="double[3]" name="endpoint"/>
               </if>               
            </if>
         </repeat>
      </block>
      <block name="SimTrackerHit" major="1" minor="0">
         <data type="int" name="flags">Bit 31 Barrel = 0, Endcap = 1, Bits 0-15 user/detector specific</data>
         <data type="int" name="n"></data>
         <repeat count="n">
            <data type="int" name="cellID">Detector specific</data>
            <data type="double[3]" name="position"></data>
            <data type="float" name="dedx"></data>
            <data type="float" name="time"></data>
            <data type="pntr" name="MCParticle"></data>
         </repeat>
      </block>
      <block name="SimCalorimeterHit" major="1" minor="0">
         <data type="int" name="flags">Bit 31 long = 1, short = 0; Bit 30 Barrel = 0, Endcap = 1; 
              Bit 29 cellid1 = 1, no cellid1 = 0; Bit 28 PDG = 1, no PDG =0, Bits 0-15 user/detector specific</data>
         <data type="int" name="nHits"></data>
         <repeat count="nHits">
            <data type="int" name="cellId0">Defines cell ID in detector specific way</data>
	    <if condition="(major==0&amp;&amp;minor&lt;9)||(flags&amp;(1&lt;&lt;29)) != 0">
                <data type="int" name="cellId1">second word for cell id</data>
            </if>
            <data type="float" name="energy"></data>
	    <if condition="(flags&amp;(1&lt;&lt;31)) != 0">
		<data type="float[3]" name="position"></data>
	    </if>
            <data type="int" name="nContributions"></data>
            <repeat count="nContributions">
		<data type="pntr" name="MCParticle"></data>
		<data type="float" name="energyContrib"></data>
		<data type="float" name="time"></data>
		<if condition="(flags&amp;(1&lt;&lt;28)) != 0">
		   <data type="int" name="PDG"></data>
		</if>
            </repeat>
         </repeat>
      </block>
      <block name="LCFloatVec" major="1" minor="0">
         <data type="int" name="flags">not yet used, Bits 0-15 user/detector specific</data>
         <data type="int" name="nVectors"></data>
         <repeat count="nVectors">
	    <data type="int" name="nElements"></data>
            <repeat count="nElements">
	       <data type="float" name="value"></data>
            </repeat>
         </repeat>
      </block>
      <block name="LCIntVec" major="1" minor="0">
         <data type="int" name="flags">not yet used, Bits 0-15 user/detector specific</data>
         <data type="int" name="nVectors"></data>
         <repeat count="nVectors">
	    <data type="int" name="nElements"></data>
            <repeat count="nElements">
	       <data type="int" name="value"></data>
            </repeat>
         </repeat>
      </block>
      <block name="CalorimeterHit" major="1" minor="0">
         <data type="int" name="flags">Bit 31 long = 1, short = 0; Bit 30 Barrel = 0, Endcap = 1; 
              Bit 29 cellid1 = 1, no cellid1 = 0, Bits 0-15 user/detector specific</data>
         <data type="int" name="nHits"></data>
         <repeat count="nHits">
            <data type="int" name="cellId0">Defines cell ID in detector specific way</data>
	    <if condition="minor==8||(flags&amp;(1&lt;&lt;29)) != 0">
                <data type="int" name="cellId1">second word for cell id</data>
            </if>
            <data type="float" name="energy"></data>
	    <if condition="(flags&amp;(1&lt;&lt;31)) != 0">
		<data type="float[3]" name="position"></data>
	    </if>
         </repeat>
      </block>
      <block name="TrackerHit" major="1" minor="0">
         <data type="int" name="flags">Bits 0-15 user/detector specific</data>
         <data type="int" name="n"></data>
         <repeat count="n">
            <data type="double[3]" name="position"></data>
            <data type="float[6]" name="covariance">Covariance Matrix of position (x,y,z)</data>
            <data type="float" name="dedx"></data>
            <data type="float" name="time"></data>
            <data type="pntr" name="rawHit">pointer to TPCHit,...</data>
         </repeat>
      </block>
      <block name="TPCHit" major="1" minor="0">
         <data type="int" name="flags">Bit 31 no raw data = 0, raw data = 1, Bits 0-15 user/detector specific</data>
         <data type="int" name="n"></data>
         <repeat count="n">
            <data type="int" name="cellID">Detector specific</data>
            <data type="float" name="time"></data>
            <data type="float" name="charge"></data>
            <data type="int" name="quality"></data>
	    <if condition="(flags&amp;(1&lt;&lt;31)) != 0">
            <data type="int" name="nRawDataWords"></data>
            <repeat count="nRawDataWords">
		<data type="int" name="rawDataWord"></data>
            </repeat>
	    </if>
         </repeat>
      </block>

    <block name="Track" major="1" minor="0">
      <data type="int" name="flag">Bit 31 Hits are kept =1, Hits are not kept = 0</data>
      <data type="int" name="nTrack"/>
      <repeat count="nTrack">
	<data type="int" name="type">Type of Track (UNKNOWN, VTX, FTD, SIT, TPC, MUON, FULL )</data>
	<data type="float" name="momentum"> absolute value of momentum, signed with charge</data>
	<data type="float" name="theta"/>
	<data type="float" name="phi"/>
	<!--data type="float" name="charge"/-->
	<data type="float" name="d0">Impact Parameter in r-phi</data>
	<data type="float" name="z0">Impact Parameter in r-z</data>
	<data type="float[15]" name="covMatrix"> Covariance matrix</data>
	<data type="float[3]" name="referencePoint">Reference point (x,y,z) </data>
	<data type="float" name="chi2">chi**2 of fit</data>
	<data type="float" name="dEdx">dEdx</data>
	<data type="float" name="dEdxError">Error of dEdx</data>
        <data type="int" name="nTracks"></data>
	<repeat count="nTracks">
	  <data type="pntr" name="Track">tracks that have been combined to this track</data>
	</repeat>
	<if condition="(flag&amp;(1&lt;&lt;31)) !=0">
	  <data type="int" name="n"/>
	  <repeat count="n">
	    <data type="pntr" name="TrackerHit"/>
	  </repeat>
	</if>
      <data type="ptag" name="this"></data>
      </repeat>
    </block>
    <block name="Cluster" major="1" minor="0">
      <data type="int" name="flag">Bit 31 Hits are kept =0, Hits are not kept = 1</data>
      <data type="int" name="nCluster"/>
      <repeat count="nCluster">
	<data type="int" name="type"> Type of cluster:(bits31-16): ECAL,HCAL,COMBINED,LAT,LCAL
	(bits15-0): NEUTRAL, CHARGED ,UNDEFINED</data>
	<!--data type="int" name="linktype"> NEUTRAL, CHARGED ,UNDEFINED</data-->
	<data type="float" name="energy">Energy of the cluster </data>
	<data type="float[3]" name="position">Center of cluster (x,y,z): to be defined</data>
	<data type="float[6]" name="errpos">cov matrix of position</data>
	<data type="float" name="theta">intrinsic direction: theta at position</data>
	<data type="float" name="phi">intrinsic direction: phi at position</data>
	<data type="float[3]" name="errdir">cov matrix of direction</data>
	<data type="float[6]" name="shape"> Shape parameters, TO BE DEFINED</data>
	<data type="float[3]" name="particletype">weight to be compatible with EM, HAD, muon cluster</data>

        <data type="int" name="nClusters"></data>
	<repeat count="nClusters">
	  <data type="pntr" name="Clusters">clusters that have been combined to this cluster</data>
	</repeat>
	<if condition="(flag&amp;(1&lt;&lt;31)) !=0">
	  <data type="int" name="n"/>
	  <repeat count="n">
	    <data type="pntr" name="CalorimeterHit"/>
	    <data type="float" name="Contribution">Energy fraction of the hit that contributed to this cluster</data> 
	  </repeat>
	</if>
        <data type="ptag" name="this"></data>
      </repeat>
    </block>
    <block name="ReconstructedParticle" major="1" minor="0">
      <data type="int" name="flag"></data>
      <data type="int" name="nObject"/>
      <repeat count="nObject">
        <data type="int" name="typeFlag">flag - bit31= 0: secondary, 1: primary 
                                         bits0-15: type: SINGLE, V0, COMPOUND, JET</data>
	<!--data type="int" name="type">single particle, compound particle (V0,B), jet</data-->
        <data type="float[3]" name="momentum">(px, py, pz)</data>
        <data type="float" name="energy">E</data>
	<data type="float[10]" name="covariance">cov matrix for 4-Vec (px,py,pz,E)</data>
	<data type="float" name="mass">mass of object used for 4vec</data>
	<data type="float" name="charge"/>
	<data type="float[3]" name="reference"> reference point for 4-vec</data>
	<data type="int" name="npid"/>
	<repeat count="npid">
	  <data type="float" name="probability"/>
	  <data type="int" name="typeID"/>
	  <data type="string" name="identifier"/>
	  <data type="int" name="npar"/>
	  <repeat count="npar">
	     <data type="float" name="parameter"/>
          </repeat>
	</repeat>
        <data type="int" name="nrecopart"/>
        <repeat count="nrecopart">
	  <data type="pntr" name="ReconstructedParticle"></data>
	  <data type="float" name="weight">weight of contribution</data>
        </repeat>
	<data type="int" name="ntrk"/>
	<repeat count="ntrk">
	  <data type="pntr" name="Track"/>
	  <data type="float" name="weight">TODO: to be defined </data>
	</repeat>
	<data type="int" name="ncal"/>
	<repeat count="ncal">
	  <data type="pntr" name="Cluster"/>
	  <data type="float" name="weight">TODO: to be defined </data>
	</repeat>
	<data type="int" name="nmc"/>
	<repeat count="nmc">
	  <data type="pntr" name="MCParticle"/>
	  <data type="float" name="weight">weight of assignment</data>
	</repeat>
        <data type="ptag" name="this"></data>
      </repeat>
    </block>
  </record>
</sio>





