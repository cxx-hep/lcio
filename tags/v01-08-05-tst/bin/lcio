#!/bin/sh

# If LCIO is not set, then figure it out
# based on the path to this script.
if [ -z "$LCIO" ]
then

  # Name of script.
  PRG="$0"

  # Directory of script.
  progname=`basename "$0"`

  # Resolve relative symlinks.
  while [ -h "$PRG" ] ; do
    ls=`ls -ld "$PRG"`
    link=`expr "$ls" : '.*-> \(.*\)$'`
    if expr "$link" : '/.*' > /dev/null; then
      PRG="$link"
    else
      PRG=`dirname "$PRG"`"/$link"
    fi
  done

  # LCIO up one.
  LCIO=`dirname "$PRG"`/..

  # Make the path fully qualified.
  LCIO=`cd "$LCIO" && pwd`
fi

#echo "LCIO=$LCIO"

LOCALCLASSPATH=$LCIO/lib/lcio.jar:$LCIO/tools/sio.jar:$LCIO/tools/jdom.jar:$LCIO/tools/saxpath.jar
LOCALCLASSPATH=$LOCALCLASSPATH:$LCIO/tools/jaxen-jdom.jar:$LCIO/tools/jaxen-core.jar:$LCIO/tools/jel.jar
LOCALCLASSPATH=$LOCALCLASSPATH:$LCIO/tools/commons-cli-1.0.jar:$LCIO/tools/commons-lang-2.1.jar
LOCALCLASSPATH=$LOCALCLASSPATH:$LCIO/tools/freehep-hep.jar:$LCIO/tools/freehep-physics.jar:$LCIO/tools/freehep-base.jar

# OS specific support for Cygwin 
cygwin=false;
case "`uname`" in
  CYGWIN*) cygwin=true ;;
esac
# For Cygwin, switch paths to Windows format before running java
if $cygwin; then
#  echo "cygwin"
#  echo "classpath before -> "$LOCALCLASSPATH
  LOCALCLASSPATH=`cygpath --path --windows "$LOCALCLASSPATH"`
#  echo "classpath after -> "$LOCALCLASSPATH
  java -cp "$LOCALCLASSPATH" hep.lcio.util.CommandLineTool $*
else
  java -cp $LOCALCLASSPATH hep.lcio.util.CommandLineTool $*
fi